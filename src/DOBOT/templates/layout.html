<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>{% block title %} Dobot Arm {% endblock title %}</title>

        <!-- ### Styles ### -->

        <link rel="stylesheet" href="/static/css/output.css">
        <link rel="stylesheet" href="/static/css/main.css">
        {% block styles %}{% endblock styles %}

        <!-- ### Scripts ### -->
        <script
          src="https://code.jquery.com/jquery-3.7.1.min.js"
          integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
          crossorigin="anonymous" defer>
        </script>

        <!-- Sortable only -->
        <script type="module">
          import Sortable from 'https://cdn.jsdelivr.net/npm/@shopify/draggable/build/esm/Sortable/Sortable.mjs';
        
          const sortableTable = function () {
            const containers = document.querySelectorAll('.sortable-list--draggable');

            if (containers.length === 0) return false;

            const sortable = new Sortable(containers, {
              draggable: '.list-item--draggable',
              mirror: {
                appendTo: '.sortable-list--draggable',
                constrainDimensions: true,
              },
              delay: {
                mouse: 100,
                drag: 100,
                touch: 100,
              },
            });            
          }

          sortableTable();

          globalThis.specificSortableTable = function (selector, draggable) {
            const containers = document.querySelectorAll(selector);

            if (containers.length === 0) return false;

            const sortable = new Sortable(containers, {
              draggable: draggable,
              mirror: {
                appendTo: selector,
                constrainDimensions: true,
              },
              delay: {
                mouse: 100,
                drag: 100,
                touch: 100,
              },
            });
            
            sortable.on('click', () => console.log("hello"));
          }
        </script>

        <!-- ### Dont forget to set the defer attr ### -->
        <script src="{{url_for('static', filename='/node_modules/preline/preline.js')}}" defer></script>
        <script src="{{url_for('static', filename='/js/toast.js')}}" defer></script>
        <script src="{{url_for('static', filename='/js/index.js')}}" defer></script>
        {% block scripts %}{% endblock scripts %}

    </head>
    <body class="bg-gray-50 dark:bg-slate-900">
        <div id="ws-url-ip" class="opacity-0 w-0 h-0 absolute top-0 left-0" data-ws-url="{{data.wsUrl}}"></div>
        <!-- ========== HEADER ========== -->
        {% include "navbar.html" %}

        <!-- ========== END HEADER ========== -->
      
        <!-- ========== MAIN CONTENT ========== -->

        {% block page_sidebar %}  {% endblock page_sidebar %}
        
        <!-- Content -->
          <!-- Page Heading -->
          {% block page_heading %} {% endblock page_heading %}
          <!-- End Page Heading -->

          {% block page_content %} {% endblock page_content %}
        <!-- End Content -->
        <!-- ========== END MAIN CONTENT ========== -->
        {% block dialog_section%}
        {% endblock dialog_section%}
      </body>
</html>